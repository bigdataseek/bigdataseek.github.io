---
title: 1차시 9(빅데이터 분석):Statistics
layout: single
classes: wide
categories:
  - Statistics
tags:
  - Statistics
toc: true
---

## 1. 기초 통계
### 1.1 통계란?

**통계**는 데이터를 수집하고 분석해서 의미를 찾아내는 방법입니다. 두 가지로 나뉘어요:
- **기술통계**: 데이터를 요약하고 보기 쉽게 정리 (예: 평균, 그래프)
- **추론통계**: 일부 데이터로 전체를 예측 (예: 설문조사로 전체 의견 추정)

**예시**:
- 기술통계: 반 학생 30명의 시험 점수 평균 구하기
- 추론통계: 30명 점수로 전체 학교 평균 점수 추측하기

### 1.2 데이터의 종류

데이터는 크게 두 가지로 나눌 수 있어요:
- **정성적(범주형)**: 숫자가 아닌 이름이나 범주 (예: 남/여, 서울/부산)
- **정량적(수치형)**: 숫자로 계산 가능한 데이터 (예: 키 170cm, 점수 85점)


데이터를 측정하는 기준은 4가지가 있어요:
1. **명목형**: 순서 없는 범주 (예: 성별, 혈액형)
2. **순서형**: 순서가 있는 범주 (예: 만족도 - 상/중/하)
3. **구간형**: 숫자지만 0이 기준이 아님 (예: 온도 0℃는 추운 정도, 시간)
4. **비율형**: 0이 절대적 기준인 숫자 (예: 키, 무게)

**쉽게 기억하기**: 명목형은 이름표, 순서형은 순위, 구간형은 눈금, 비율형은 절대 0이 있는 숫자!

```python
# 데이터 준비
import pandas as pd
import numpy as np

# 예시 데이터
data = {
    '성별': ['남', '여', '남', '여', '남'],
    '키': [170, 160, 180, 155, 175],
    '만족도': ['상', '중', '하', '중', '상']
}
df = pd.DataFrame(data)
```


### 1.3 중심 경향: 데이터의 대표값

데이터의 중심을 나타내는 값이에요:
- **평균**: 모든 값을 더해 개수로 나눈 값
- **중앙값**: 데이터를 크기순으로 나열했을 때 가운데 값
- **최빈값**: 가장 자주 나온 값

**예시**:
시험 점수 100, 90, 80, 70, 60, 50, 30
- 평균: (100+90+80+70+60+50+30) ÷ 7 = 68.6
- 중앙값: 70 (가운데 값)
- 최빈값: 없음 (모두 한 번씩 나옴)

**팁**: 평균은 극단값(예: 1000점)에 민감해요. 데이터가 치우쳤다면 중앙값이 더 나을 수 있어요.

```python
scores = [100, 90, 80, 70, 60, 50, 30]
print("평균:", np.mean(scores))  # 평균
print("중앙값:", np.median(scores))  # 중앙값
print("최빈값:", pd.Series(scores).mode().values[0])  # 최빈값
```

### 1.4 산포도: 데이터의 퍼짐 정도

데이터가 얼마나 퍼져 있는지를 보여줘요:
- **분산**: 각 값이 평균에서 얼마나 떨어져 있는지의 평균
- **표준편차**: 분산의 제곱근, 데이터의 퍼짐을 원래 단위로 표현
- **사분위수 범위(IQR)**: 데이터의 중간 50%의 범위 (Q3 - Q1)

**예시**:
점수 [100, 90, 80, 70, 60, 50, 30]의 표준편차가 크면 점수가 다양하고, 작으면 비슷비슷해요.

```python
print("분산:", np.var(scores))  # 분산
print("표준편차:", np.std(scores))  # 표준편차
print("IQR:", np.percentile(scores, 75) - np.percentile(scores, 25))  # IQR
```

### 1.5 분포: 데이터의 생김새

- **정규분포**: 종 모양으로, 데이터가 평균을 중심으로 좌우 대칭이에요. 시험 점수처럼 대부분 평균 근처에 몰리고 극단값은 적은 경우를 말해요.
- **왜도(Skewness)**: 데이터가 한쪽으로 치우쳤는지 보여줘요. 통계학에서 "치우침"은 "꼬리의 방향"과 일치.
  - **양의 왜도**: 오른쪽 꼬리가 길어요 (예: 소득 분포, 부자 쪽으로 치우침).
  - **음의 왜도**: 왼쪽 꼬리가 길어요 (예: 시험 점수에서 낮은 점수가 많음).
  - **0에 가까움**: 좌우 대칭 (정규분포).
- **첨도(Kurtosis)**: 분포의 뾰족함이나 평평함을 나타내요.
  - **높은 첨도**: 뾰족하고 꼬리가 두꺼워요 (극단값 많음).
  - **낮은 첨도**: 평평하고 꼬리가 얇아요 (극단값 적음).

**예시**: 
- 시험 점수가 정규분포라면, 대부분 평균 근처에 몰려 있고 극단값은 적어요.
- 소득 데이터는 보통 오른쪽으로 치우쳐(양의 왜도) 부자들이 적은 경우가 많아요.

```python
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
from scipy.stats import skew, kurtosis

# 샘플 데이터 생성
np.random.seed(42)  # 결과 재현성을 위해
skewed_data = np.random.exponential(scale=2, size=1000)  # 오른쪽 치우친 데이터 (지수분포)

# 1. 히스토그램과 분포 곡선 시각화
plt.figure(figsize=(12, 5))

# 치우친 데이터
sns.histplot(skewed_data, kde=True, color='orange')
plt.title('치우친 데이터 (양의 왜도)')
plt.xlabel('값')
plt.ylabel('빈도')
plt.show()

# 2. 왜도와 첨도 계산
# 정규분포의 경우, 왜도 0, 첨도 = 3 임.
# scipy.stats.kurtosis는 Excess Kurtosis (초과 첨도, 0)를 반환
print("\n치우친 데이터:")
print(f"왜도: {skew(skewed_data):.3f}")  # 왜도 계산
print(f"첨도: {kurtosis(skewed_data):.3f}")  # 첨도 계산
```

### 1.6 이상치: 튀는 데이터

**이상치**는 다른 데이터와 너무 동떨어진 값이에요.
- **찾는 방법**: IQR(사분위수 범위)을 이용
  - 아래 경계: Q1 - 1.5 × IQR
  - 위 경계: Q3 + 1.5 × IQR
  - 이 범위를 벗어나면 이상치!

**예시**: 점수 (100, 90, 80, 70, 60, 50, 30) 에서 1000이 있다면 이상치일 가능성이 높아요.

```python
q1 = np.percentile(scores, 25)
q3 = np.percentile(scores, 75)
iqr = q3 - q1
lower_bound = q1 - 1.5 * iqr
upper_bound = q3 + 1.5 * iqr
outliers = [x for x in scores if x < lower_bound or x > upper_bound]
print("이상치:", outliers)
```

### 1.7 분포 시각화
```python
import seaborn as sns
import matplotlib.pyplot as plt

sns.histplot(scores, kde=True)  # 히스토그램과 분포 곡선
plt.title("점수 분포")
plt.show()
```

### 1.8 요약 통계
```python
print(df['키'].describe())  # 키 데이터의 요약(개수, 평균, 표준편차, 최소/최대, 사분위수)
```

### 1.9 핵심 요약
1. **통계**는 데이터를 요약(기술통계)하거나 예측(추론통계)하는 학문이에요.
2. 데이터는 **범주형(성별)**과 **수치형(키)**으로 나뉘고, 척도(명목, 순서, 구간, 비율)에 따라 다뤄요.
3. **평균, 중앙값, 최빈값**으로 데이터의 중심을 파악하고, **분산, 표준편차, IQR**로 퍼짐을 확인해요.
4. **정규분포**는 데이터가 좌우 대칭인 이상적인 형태이고, **이상치**는 튀는 값을 찾아내는 데 중요해요.
5. Python의 **pandas, numpy, seaborn**으로 쉽게 계산하고 시각화할 수 있어요!


## 2. 관계 분석

### 2.1 변수 간 관계란?

데이터 분석에서는 변수(예: 키, 성별, 팁 금액) 간의 관계를 파악하는 게 중요해요. 변수의 종류에 따라 분석 방법이 달라져요:

| 변수 조합       | 분석 방법                |
|-------------|---------------------|
| 숫자 vs 숫자  | 상관분석 (숫자 간 관계 강도 측정) |
| 범주 vs 숫자  | 그룹별 평균 비교          |
| 범주 vs 범주  | 교차표, 카이제곱검정       |

**쉽게 이해**: 
- 숫자 데이터(키, 몸무게)끼리는 얼마나 비슷하게 움직이는지 확인.
- 범주 데이터(남/여)와 숫자(팁)를 비교해 그룹별 차이를 봄.
- 범주 데이터(성별, 흡연 여부)끼리는 어떤 조합이 많은지 확인.

### 2.2 상관분석: 숫자 변수 간 관계

**상관분석**은 두 숫자 변수가 얼마나 관련 있는지 보여줘요.  
- **상관계수(r)**: -1에서 1 사이 값
  - **1에 가까움**: 같이 커지거나 작아짐 (강한 양의 관계)
  - **-1에 가까움**: 하나 커질 때 다른 하나 작아짐 (강한 음의 관계)
  - **0에 가까움**: 관계 거의 없음

| 상관계수 값 | 의미           |
|-----------|--------------|
| 0.9~1.0   | 매우 강한 양의 관계 |
| 0.7~0.9   | 강한 양의 관계    |
| 0.5~0.7   | 보통 양의 관계    |
| 0.3~0.5   | 약한 양의 관계    |
| 0.1~0.3   | 거의 관계 없음    |
| 0 이하     | 음의 관계        |

**예시**: 식사 금액(total_bill)과 팁(tip)이 같이 커지면 양의 상관관계!

```python
import seaborn as sns
import matplotlib.pyplot as plt

# 예시 데이터: 식당 팁 데이터
df = sns.load_dataset('tips')

# 숫자 변수 간 상관계수
print(df[['total_bill', 'tip', 'size']].corr())

# 상관관계 히트맵
sns.heatmap(df[['total_bill', 'tip', 'size']].corr(), annot=True, cmap='coolwarm')
plt.title("상관관계 히트맵")
plt.show()
```

**설명**: 이 코드는 식사 금액, 팁, 테이블 크기의 상관관계를 숫자와 색상으로 보여줘요. 빨간색은 강한 양의 관계, 파란색은 음의 관계예요.

### 2.3 교차분석: 범주형 변수 간 관계

**교차분석**은 두 범주형 변수(예: 성별, 흡연 여부)의 관계를 표로 정리해요.  
- **교차표**: 각 범주 조합의 빈도를 보여줌.

**예시**: 성별(남/여)과 흡연 여부(흡연/비흡연)를 비교해 어떤 조합이 많은지 확인.


```python
import pandas as pd

# 교차표 만들기
ct = pd.crosstab(df['sex'], df['smoker'])
print(ct)

# 비율로 보기
print(ct.apply(lambda x: x / x.sum(), axis=1))
```
**설명**: 이 코드는 성별별 흡연자 수를 표로 보여주고, 각 성별에서 흡연/비흡연 비율을 계산해요.

### 2.4 그룹 비교: 범주형 vs 숫자형

범주형 변수(예: 성별)에 따라 숫자형 변수(예: 팁)의 평균을 비교해요.  
- **예시**: 남성과 여성의 평균 팁 금액이 다를까?

```python
# 성별에 따라 팁 평균 비교
print(df.groupby('sex')['tip'].mean())

# 박스플롯으로 시각화
sns.boxplot(x='sex', y='tip', data=df)
plt.title("성별에 따른 팁 비교")
plt.show()
```

**설명**: 이 코드는 남성과 여성의 팁 평균을 계산하고, 박스플롯으로 팁 분포를 보여줘요. 박스플롯은 데이터의 퍼짐과 이상치를 쉽게 확인할 수 있어요.

### 2.5 회귀분석: 숫자 변수 간 직선 관계

**회귀분석**은 두 숫자 변수 간의 직선 관계를 찾아요.  
- **단순 선형 회귀**: `y = 기울기 × x + 절편` 형태로 관계를 표현.
- **예시**: 식사 금액(x)에 따라 팁(y)이 어떻게 변하는지 예측.

```python
import statsmodels.api as sm

# 데이터 준비
X = df['total_bill']
y = df['tip']
X = sm.add_constant(X)  # 상수항 추가

# 회귀분석
model = sm.OLS(y, X).fit()
print(model.summary())

# 산점도 + 회귀선
sns.regplot(x='total_bill', y='tip', data=df)
plt.title("식사 금액과 팁의 관계")
plt.show()
```

**설명**: 이 코드는 식사 금액과 팁의 관계를 직선으로 그리고, 그 직선의 세부 정보를 출력해요. 산점도에 직선을 추가해 관계를 시각적으로 보여줘요.

### 2.6 핵심 요약
1. **관계 분석**은 변수 간 연결을 파악하는 방법이에요.
2. **상관분석**: 숫자 변수 간 관계 강도를 상관계수(-1~1)로 확인.
3. **교차분석**: 범주형 변수 간 조합 빈도를 표로 정리.
4. **그룹 비교**: 범주형 변수별 숫자 데이터(예: 평균) 비교.
5. **회귀분석**: 숫자 변수 간 직선 관계를 예측.
6. Python의 **pandas, seaborn, statsmodels**로 쉽게 분석하고 시각화 가능!
😊
## 3. 기본 가설 검정 

### 3.1 가설 검정이란?

**가설 검정**은 데이터로 어떤 주장이 참인지 거짓인지 판단하는 과정이에요.
- **귀무가설(H₀)**: “차이가 없다” 또는 “효과가 없다”는 기본 가정.
- **대립가설(H₁)**: “차이가 있다” 또는 “효과가 있다”는 주장.
- **p-value**: 귀무가설이 참일 때, 현재 데이터처럼 극단적인 결과가 나올 확률.
- **유의수준(α)**: 보통 0.05. p-value가 0.05보다 작으면 귀무가설을 기각하고 차이가 있다고 판단.

**예시**:
- 귀무가설: “남성과 여성의 팁 평균은 같다.”
- 대립가설: “남성과 여성의 팁 평균은 다르다.”
- p-value < 0.05라면 남녀 팁 평균이 다르다고 결론!

### 3.2 t-검정: 두 그룹 평균 비교

**t-검정**은 두 그룹의 평균이 다른지 확인할 때 사용해요.
- **단일표본 t-검정**: 한 그룹의 평균이 특정 값과 다른지.
- **독립표본 t-검정**: 두 그룹(예: 남 vs 여)의 평균 비교.
- **대응표본 t-검정**: 같은 그룹의 전후 비교(예: 교육 전/후 점수).

**예시**: 남성과 여성의 팁 평균이 다를까?

```python
from scipy.stats import ttest_ind
import seaborn as sns
import pandas as pd

# 예시 데이터: 식당 팁 데이터
df = sns.load_dataset('tips')

# 성별에 따른 팁 비교
male_tips = df[df['sex'] == 'Male']['tip']
female_tips = df[df['sex'] == 'Female']['tip']

t_stat, p = ttest_ind(male_tips, female_tips)
print(f"t-통계량: {t_stat:.3f}, p-value: {p:.4f}")

if p < 0.05:
    print("✔️ 남녀 팁 평균에 차이가 있습니다!")
else:
    print("❌ 남녀 팁 평균에 차이가 없습니다.")
```

**설명**: p-value가 0.05보다 작으면 남녀 팁 평균이 다르다고 판단해요.

## 3.3 분산분석(ANOVA): 여러 그룹 평균 비교

**ANOVA**는 세 개 이상 그룹의 평균이 다른지 확인할 때 사용해요.
- **귀무가설**: 모든 그룹의 평균이 같다.
- **예시**: 요일별(목, 금, 토, 일) 팁 평균이 다를까?

```python
from scipy.stats import f_oneway

# 요일별 팁 데이터
groups = [df[df['day'] == d]['tip'] for d in df['day'].unique()]

f_stat, p = f_oneway(*groups)
print(f"F-통계량: {f_stat:.3f}, p-value: {p:.4f}")

if p < 0.05:
    print("✔️ 요일별 팁 평균에 차이가 있습니다!")
else:
    print("❌ 요일별 팁 평균에 차이가 없습니다.")
```

**설명**: p-value가 0.05보다 작으면 요일별 팁 평균이 다르다고 판단해요.

## 3.4 카이제곱 검정: 범주형 변수 관계 확인

**카이제곱 검정**은 두 범주형 변수(예: 성별, 흡연 여부)가 서로 관련 있는지 확인해요.
- **귀무가설**: 두 변수는 관련이 없다.
- **예시**: 성별과 흡연 여부가 관련 있을까?

```python
from scipy.stats import chi2_contingency

# 성별과 흡연 여부 교차표
ct = pd.crosstab(df['sex'], df['smoker'])
chi2, p, dof, expected = chi2_contingency(ct)

print(f"Chi2 통계량: {chi2:.3f}, p-value: {p:.4f}")

if p < 0.05:
    print("✔️ 성별과 흡연 여부는 관련이 있습니다!")
else:
    print("❌ 성별과 흡연 여부는 관련이 없습니다.")
```
**설명**: p-value가 0.05보다 작으면 성별과 흡연 여부가 관련 있다고 판단해요.

### 3.5 결과 해석과 시각화

- **p-value < 0.05**: 차이가 있다고 판단 → 귀무가설 기각.
- **p-value ≥ 0.05**: 차이가 없다고 판단 → 귀무가설 채택.

```python
import matplotlib.pyplot as plt

# 성별별 팁 분포 박스플롯
sns.boxplot(x='sex', y='tip', data=df)
plt.title("성별에 따른 팁 분포")
plt.show()

# 성별과 흡연 여부 교차표 히트맵
sns.heatmap(pd.crosstab(df['sex'], df['smoker']), annot=True, cmap='YlGnBu')
plt.title("성별과 흡연 여부 관계")
plt.show()
```

**설명**: 박스플롯으로 팁의 분포를, 히트맵으로 성별-흡연 관계를 시각적으로 확인할 수 있어요.


## 3.6 핵심 요약
1. **가설 검정**: 귀무가설(차이 없음)과 대립가설(차이 있음)을 데이터로 검증.
2. **t-검정**: 두 그룹 평균 비교 (예: 남녀 팁 차이).
3. **ANOVA**: 세 그룹 이상 평균 비교 (예: 요일별 팁 차이).
4. **카이제곱 검정**: 범주형 변수 간 관계 확인 (예: 성별-흡연 관계).
5. **p-value**: 0.05보다 작으면 차이가 있다고 판단!
6. Python의 **scipy, seaborn**으로 검정과 시각화를 쉽게 할 수 있어요.

## 🔹 전체 학습 흐름

| 단계    | 주요 내용                     | 도구/방법                             |
|-------|--------------------------|-----------------------------------|
| **1단계** | 평균, 분산, 이상치            | `mean`, `std`, `boxplot`          |
| **2단계** | 상관분석, 교차표             | `corr()`, `crosstab`              |
| **3단계** | t-검정, ANOVA, 카이제곱 검정 | `ttest_ind`, `f_oneway`, `chi2_contingency` |

